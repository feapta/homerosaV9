var horas=[],medidasLS=[],medidasLS2=[],medidasLS3=[],medidasLS4=[];function graficas(){$.ajax({url:"/sensores/peticion",type:"POST",data:{peticion:1},success:function(d){let a=JSON.parse(d);0!=a.length&&update(a)},error:function(d){console.error("Error en la solicitud:",d)}})}$(document).ready((function(){setTimeout(graficas,1e3)}));const ctx_tem=document.getElementById("gra_tem").getContext("2d");var dataTE={labels:[horas],datasets:[{label:"Temp exte",borderWidth:1,borderColor:"orange",backgroundColor:"orange",fill:!1,lineTension:.3,spanGaps:!0,data:[medidasLS[0],medidasLS[1],medidasLS[2],medidasLS[3],medidasLS[4],medidasLS[5],medidasLS[6],medidasLS[7],medidasLS[8],medidasLS[9],medidasLS[10],medidasLS[11],medidasLS[12],medidasLS[13],medidasLS[14],medidasLS[15],medidasLS[16],medidasLS[17],medidasLS[18],medidasLS[19],medidasLS[20],medidasLS[21],medidasLS[22],medidasLS[23]]},{label:"Temp inte",borderWidth:1,borderColor:"purple",backgroundColor:"purple",fill:!1,lineTension:.3,spanGaps:!0,data:[medidasLS2[0],medidasLS2[1],medidasLS2[2],medidasLS2[3],medidasLS2[4],medidasLS2[5],medidasLS2[6],medidasLS2[7],medidasLS2[8],medidasLS2[9],medidasLS[10],medidasLS2[11],medidasLS2[12],medidasLS2[13],medidasLS2[14],medidasLS2[15],medidasLS2[16],medidasLS2[17],medidasLS2[18],medidasLS2[19],medidasLS2[20],medidasLS2[21],medidasLS2[22],medidasLS2[23]]}]},optionsTE={responsive:!0,pointRadius:1,plugins:{legend:{labels:{boxWidth:20,height:10,font:{size:10}}}},scales:{y:{suggestedMin:-20,suggestedMax:50,ticks:{color:"black",font:{size:8}}},x:{ticks:{color:"black",font:{size:8}}}}},grafica_TE=new Chart(ctx_tem,{type:"line",data:dataTE,options:optionsTE});const ctx_hume=document.getElementById("gra_hume");var dataHU={labels:[horas],datasets:[{label:"Hu Aire",borderWidth:1,borderColor:"blue",backgroundColor:"blue",fill:!1,lineTension:.3,spanGaps:!0,data:[medidasLS3[0],medidasLS3[1],medidasLS3[2],medidasLS3[3],medidasLS3[4],medidasLS3[5],medidasLS3[6],medidasLS3[7],medidasLS3[8],medidasLS3[9],medidasLS3[10],medidasLS3[11],medidasLS3[12],medidasLS3[13],medidasLS3[14],medidasLS3[15],medidasLS3[16],medidasLS3[17],medidasLS3[18],medidasLS3[19],medidasLS3[20],medidasLS3[21],medidasLS3[22],medidasLS3[23]]},{label:"Hu Suelo",borderWidth:1,borderColor:"brown",backgroundColor:"brown",fill:!1,lineTension:.3,spanGaps:!0,data:[2[0],medidasLS4[1],medidasLS4[2],medidasLS4[3],medidasLS4[4],medidasLS4[5],medidasLS4[6],medidasLS4[7],medidasLS4[8],medidasLS4[9],medidasLS4[10],medidasLS4[11],medidasLS4[12],medidasLS4[13],medidasLS4[14],medidasLS4[15],medidasLS4[16],medidasLS4[17],medidasLS4[18],medidasLS4[19],medidasLS4[20],medidasLS4[21],medidasLS4[22],medidasLS4[23]]}]},optionsHU={responsive:!0,pointRadius:1,plugins:{legend:{labels:{boxWidth:20,height:10,font:{size:10}}}},scales:{y:{suggestedMin:0,suggestedMax:100,ticks:{color:"black",font:{size:8}}},x:{ticks:{color:"black",font:{size:8}}}}},grafica_HU=new Chart(ctx_hume,{type:"line",data:dataHU,options:optionsHU});function update(d){for(let a=0;a<d.length;a++)medidasLS[a]=d[a].te,medidasLS2[a]=d[a].te_in,medidasLS3[a]=d[a].hu,medidasLS4[a]=d[a].hu_su;for(let a=19;a>0;a--)console.log(d),horas[a]=d[a].h,console.log(horas[a]);grafica_TE.data.labels=horas,grafica_HU.data.labels=horas,console.log(grafica_TE.data.labels),grafica_TE.data.datasets[0].data=medidasLS,grafica_TE.data.datasets[1].data=medidasLS2,grafica_TE.update(),grafica_HU.data.datasets[0].data=medidasLS3,grafica_HU.data.datasets[1].data=medidasLS4,grafica_HU.update()}
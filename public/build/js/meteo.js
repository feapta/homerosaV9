var segundos_anochecer,segundos_amanecer;const key="a1afadd13ed6fe6311222c1e6b003ad1";async function getWeather(){const e=`https://api.openweathermap.org/data/2.5/weather?lat=39.16&lon=-3.84&appid=${key}&units=metric&lang=sp`,n=await fetch(e),t=await n.json();$("#cityName").html(t.name),$("#temp_m").html(t.main.temp),$("#te_max").html(t.main.temp_max),$("#te_min").html(t.main.temp_min),$("#humi_m").html(t.main.humidity),$("#pres").html(t.main.pressure),$("#alt").html(t.main.grnd_level),$("#ni_mar").html(t.main.sea_level),$("#nubes_des").html(t.weather[0].description),$("#wicon").attr("src",{"01d":"/build/img/clima/01d.png","01n":"/build/img/clima/01n.png","02d":"/build/img/clima/02d.png","02n":"/build/img/clima/02n.png","03d":"/build/img/clima/03d.png","03n":"/build/img/clima/03n.png","04d":"/build/img/clima/04d.png","04n":"/build/img/clima/04n.png","09d":"/build/img/clima/09d.png","09n":"/build/img/clima/09n.png","10d":"/build/img/clima/10d.png","10n":"/build/img/clima/10n.png","11d":"/build/img/clima/11d.png","11n":"/build/img/clima/11n.png","13d":"/build/img/clima/13d.png","13n":"/build/img/clima/13n.png","50d":"/build/img/clima/50d.png","50n":"/build/img/clima/50n.png"}[t.weather[0].icon]),$("#velo_win").html(t.wind.speed),$("#dire_win").html(t.wind.deg),$("#gust_win").html(t.wind.gust);let i=t.sys.sunrise,a=t.sys.sunset;segundos_amanecer=i,segundos_anochecer=a;let m=new Date(1e3*i),l=m.getHours(),o=m.getMinutes(),c=new Date(1e3*a),r=c.getHours(),d=c.getMinutes();l<10&&(l="0"+l),r<10&&(r="0"+r),o<10&&(o="0"+o),d<10&&(d="0"+d);let u=l+":"+o,s=r+":"+d;document.querySelector("#hora_ama").innerHTML=u,document.querySelector("#hora_no").innerHTML=s,document.querySelector(".anochecer_info").innerHTML=s,document.querySelector(".amanecer_info").innerHTML=u}async function getWeatherdia(){const e=`https://api.openweathermap.org/data/2.5/onecall?lat=39.16&lon=-3.84&exclude=current,minutely,hourly&appid=${key}&units=metric&lang=sp`,n=await fetch(e),t=await n.json();let i=my.getMonth()+1,a=my.getFullYear();const m=new Date(a,i,0).getDate();var l=mydate.getDate()+1;for(let e=0;e<4;e++){let n=l++;n>m&&(n-=m),$("#diaa"+[e]).html(n),$("#temp"+e).html(t.daily[e].temp.day),$("#humi"+e).html(t.daily[e].humidity),$("#temp_x"+e).html(t.daily[e].temp.max),$("#temp_m"+e).html(t.daily[e].temp.min);var o="https://openweathermap.org/img/w/"+t.daily[e].weather[0].icon+".png";$("#wicon"+e).attr("src",o)}}async function polucion(){const e=await fetch("http://api.openweathermap.org/data/2.5/air_pollution?lat=39.16&lon=-3.84&appid=a1afadd13ed6fe6311222c1e6b003ad1"),n=await e.json();document.querySelector(".ica").innerHTML=n.list[0].main.aqi;const t=n.list[0].main.aqi;document.querySelector(".co").innerHTML=n.list[0].components.co,document.querySelector(".nh3").innerHTML=n.list[0].components.nh3,document.querySelector(".no").innerHTML=n.list[0].components.no,document.querySelector(".no2").innerHTML=n.list[0].components.no2,document.querySelector(".o3").innerHTML=n.list[0].components.o3,document.querySelector(".pm2_5").innerHTML=n.list[0].components.pm2_5,document.querySelector(".pm10").innerHTML=n.list[0].components.pm10,document.querySelector(".so2").innerHTML=n.list[0].components.so2;const i=document.querySelector(".ica");i.style.backgroundColor=1==t?"green":2==t?"blue":3==t?"yellow":4==t?"orange":"red"}function abreleyenda(){document.querySelector(".conte_leyenda").classList.toggle("ocultar")}$(document).ready((function(){my=new Date,getWeather(),getWeatherdia();document.querySelector(".btn-leyenda").addEventListener("click",abreleyenda)}));